var app=function(){"use strict";function t(){}const n=t=>t;function e(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(e)}function a(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}const s="undefined"!=typeof window;let l=s?()=>window.performance.now():()=>Date.now(),c=s?t=>requestAnimationFrame(t):t;const u=new Set;let d,f=!1;function h(){u.forEach(t=>{t[0](l())||(u.delete(t),t[1]())}),(f=u.size>0)&&c(h)}function m(t){let n;return f||(f=!0,c(h)),{promise:new Promise(e=>{u.add(n=[t,e])}),abort(){u.delete(n)}}}function p(t,n){t.appendChild(n)}function w(t,n,e){t.insertBefore(n,e||null)}function v(t){t.parentNode.removeChild(t)}function k(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(){return t=" ",document.createTextNode(t);var t}function y(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function x(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)}function b(t,n){(null!=n||t.value)&&(t.value=n)}function _(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}class M{constructor(t,n=null){this.e=k("div"),this.a=n,this.u(t)}m(t,n=null){for(let e=0;e<this.n.length;e+=1)w(t,this.n[e],n);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(v)}}let E,C=0,S={};function P(t,n){t.style.animation=(t.style.animation||"").split(", ").filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")).join(", "),n&&!--C&&c(()=>{if(C)return;let t=d.cssRules.length;for(;t--;)d.deleteRule(t);S={}})}function j(t){E=t}function A(){const t=E;return(n,e)=>{const r=t.$$.callbacks[n];if(r){const o=_(n,e);r.slice().forEach(n=>{n.call(t,o)})}}}const L=[],T=[],I=[],O=[],B=Promise.resolve();let D,R=!1;function N(t){I.push(t)}function H(){const t=new Set;do{for(;L.length;){const t=L.shift();j(t),U(t.$$)}for(;T.length;)T.pop()();for(let n=0;n<I.length;n+=1){const e=I[n];t.has(e)||(e(),t.add(e))}I.length=0}while(L.length);for(;O.length;)O.pop()();R=!1}function U(t){t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(N))}function z(t,n,e){t.dispatchEvent(_(`${n?"intro":"outro"}${e}`))}const q=new Set;let V;function F(t,n){t&&t.i&&(q.delete(t),t.i(n))}function G(t,n,e,r){if(t&&t.o){if(q.has(t))return;q.add(t),V.c.push(()=>{q.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}const J={duration:0};function K(e,r,o){let i,s,c=r(e,o),u=!1,f=0;function h(){i&&P(e,i)}function p(){const{delay:r=0,duration:o=300,easing:a=n,tick:p=t,css:w}=c||J;w&&(i=function(t,n,e,r,o,a,i,s=0){const l=16.666/r;let c="{\n";for(let t=0;t<=1;t+=l){const r=n+(e-n)*a(t);c+=100*t+`%{${i(r,1-r)}}\n`}const u=c+`100% {${i(e,1-e)}}\n}`,f=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(u)}_${s}`;if(!S[f]){if(!d){const t=k("style");document.head.appendChild(t),d=t.sheet}S[f]=!0,d.insertRule(`@keyframes ${f} ${u}`,d.cssRules.length)}const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${f} ${r}ms linear ${o}ms 1 both`,C+=1,f}(e,0,1,o,r,a,w,f++)),p(0,1);const v=l()+r,g=v+o;s&&s.abort(),u=!0,N(()=>z(e,!0,"start")),s=m(t=>{if(u){if(t>=g)return p(1,0),z(e,!0,"end"),h(),u=!1;if(t>=v){const n=a((t-v)/o);p(n,1-n)}}return u})}let w=!1;return{start(){w||(P(e),a(c)?(c=c(),(D||(D=Promise.resolve()).then(()=>{D=null}),D).then(p)):p())},invalidate(){w=!1},end(){u&&(h(),u=!1)}}}function Q(t,n,r){const{fragment:i,on_mount:s,on_destroy:l,after_update:c}=t.$$;i.m(n,r),N(()=>{const n=s.map(e).filter(a);l?l.push(...n):o(n),t.$$.on_mount=[]}),c.forEach(N)}function W(t,n){t.$$.fragment&&(o(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function X(t,n){t.$$.dirty||(L.push(t),R||(R=!0,B.then(H)),t.$$.dirty=r()),t.$$.dirty[n]=!0}function Y(n,e,a,i,s,l){const c=E;j(n);const u=e.props||{},d=n.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:r(),dirty:null};let f=!1;d.ctx=a?a(n,u,(t,e,r=e)=>(d.ctx&&s(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),f&&X(n,t)),e)):u,d.update(),f=!0,o(d.before_update),d.fragment=i(d.ctx),e.target&&(e.hydrate?d.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):d.fragment.c(),e.intro&&F(n.$$.fragment),Q(n,e.target,e.anchor),H()),j(c)}class Z{$destroy(){W(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const tt='# Svelte Markdown Editor\n\n## Goal\n\nCreate an online editor which allows to compose and preview markdown files.\n\n## Notes\n\nI tend to write plenty of markdown files, and while [VSCode](https://code.visualstudio.com/) provides an excellent interface, I\'d really like an online alternative for this syntax.\n\nEnter this project. It is something which might actually be useful, at least personally, and a perfect excuse to practice with [Svelte](https://svelte.dev).\n\n## Design\n\nThe UI is inspired by [Svelte\'s own REPL](https://svelte.dev/repl). The icons have been coded _directly_ in VSCode, stressing over the `d` attribute of `path` elements.\n\nTake this one for instance.\n\n```\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n  <g transform="translate(5 5)" stroke-width="10" stroke="currentColor" stroke-linejoin="round" stroke-linecap="round" fill="none">\n    <path d="M 73 0 l 17 17 -45 45 -17 0 0 -17 45 -45" />\n    <path d="M 35 10 h -25 a 10 10 0 0 0 -10 10 v 60 a 10 10 0 0 0 10 10 h 60 a 10 10 0 0 0 10 -10 v -25" />\n  </g>\n</svg>\n```\n\nCan you guess which icon is behind this snippet?\n\n## Script\n\nAside from those stylish icons, the project uses:\n\n- [marked.js](https://github.com/markedjs/marked) to parse between markdown and markup\n- [DOMPurify](https://github.com/cure53/DOMPurify) for a wee bit o\' sanitation.\n\nThere are also a couple of niceties to rapidly append code blocks or the syntax for a URL.\n\nIt\'s far from perfect, but to create **README.md** files is already a jump in the right direction.\n';function nt(){return t="markdown--string",localStorage.getItem(t)||tt;var t}function et(t){const n=t-1;return n*n*n+1}function rt(t,{delay:n=0,duration:e=400,easing:r=et,x:o=0,y:a=0,opacity:i=0}){const s=getComputedStyle(t),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-i);return{delay:n,duration:e,easing:r,css:(t,n)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*o}px, ${(1-t)*a}px);\n\t\t\topacity: ${l-u*n}`}}function ot(n){var e,r,o,a,i;return{c(){e=g("svg"),r=g("g"),o=g("path"),a=g("path"),i=g("path"),x(o,"d","M 10 0 h 52 l 28 25 v 55 a 10 10 0 0 1 -10 10 h -70 a 10 10 0 0 1 -10 -10 v -70 a 10 10 0 0 1 10 -10"),x(a,"d","M 20 0 v 25 h 40"),x(i,"d","M 20 90 v -40 h 50 v 40"),x(r,"transform","translate(5 5)"),x(r,"stroke-width","10"),x(r,"stroke","currentColor"),x(r,"stroke-linejoin","round"),x(r,"stroke-linecap","round"),x(r,"fill","none"),x(e,"aria-hidden","true"),x(e,"xmlns","http://www.w3.org/2000/svg"),x(e,"viewBox","0 0 100 100")},m(t,n){w(t,e,n),p(e,r),p(r,o),p(r,a),p(r,i)},i:t,o:t,d(t){t&&v(e)}}}function at(n){var e,r,o,a,i;return{c(){e=g("svg"),r=g("g"),o=g("path"),a=g("path"),x(o,"transform","translate(30 75) rotate(-45)"),x(o,"d","M 0 0 v -42.5"),x(a,"transform","translate(30 75) rotate(45)"),x(a,"d","M 0 0 v -85"),x(r,"transform","translate(5 5)"),x(r,"stroke-width","10"),x(r,"stroke","currentColor"),x(r,"stroke-linejoin","round"),x(r,"stroke-linecap","round"),x(r,"fill","none"),x(e,"aria-hidden","true"),x(e,"xmlns","http://www.w3.org/2000/svg"),x(e,"viewBox","0 0 100 100")},m(t,n){w(t,e,n),p(e,r),p(r,o),p(r,a)},i(t){i||N(()=>{(i=K(e,rt,{duration:300,delay:150})).start()})},o:t,d(t){t&&v(e)}}}function it(n){var e,r,a,i,s,l,c,u,d,f,h;function m(t,n){return n.isSaved?at:ot}var g=m(0,n),_=g(n);return{c(){e=k("nav"),(r=k("button")).innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g transform="translate(5 5)" stroke-width="10" stroke="currentColor" stroke-linejoin="round" stroke-linecap="round" fill="none"><path id="bracket--left" d="M 30 18 l -30 27 30 27"></path><use href="#bracket--left" transform="translate(90 0) scale(-1 1)"></use></g></svg>',a=$(),(i=k("button")).innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g transform="translate(5 5)" stroke-width="10" stroke="currentColor" stroke-linejoin="round" stroke-linecap="round" fill="none"><path id="curve--left" d="M 35 25 h -10 a 20 20 0 0 0 0 40 h 10"></path><use href="#curve--left" transform="translate(90 0) scale(-1 1)"></use><path d="M 30 45 h 30"></path></g></svg>',s=$(),l=k("button"),_.c(),c=$(),(u=k("button")).innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><mask id="mask--circle" maskUnits="userSpaceOnUse"><rect x="0" y="0" width="100" height="100" fill="white"></rect><circle cx="50" cy="50" r="24" fill="black"></circle></mask></defs><g mask="url(#mask--circle)"><g transform="translate(5 5)" stroke-width="10" stroke="currentColor" stroke-linejoin="round" stroke-linecap="round" fill="currentColor"><path d="M 0 45 c 25 -40 65 -40 90 0 -25 40 -65 40 -90 0"></path></g></g><g transform="translate(50 50)"><circle cx="0" cy="0" r="14" fill="currentColor"></circle></g></svg>',d=$(),f=k("textarea"),x(r,"title","Add code block"),x(r,"aria-label","Add code block"),x(i,"title","Add link"),x(i,"aria-label","Add link"),x(l,"title","Save to local storage"),x(l,"aria-label","Save to local storage"),x(u,"title","Preview markdown"),x(u,"aria-label","Download markdown"),h=[y(r,"click",n.handleCode),y(i,"click",n.handleLink),y(l,"click",n.handleSave),y(u,"click",n.handlePreview),y(f,"input",n.textarea_1_input_handler),y(f,"input",n.handleInput)]},m(t,o){w(t,e,o),p(e,r),p(e,a),p(e,i),p(e,s),p(e,l),_.m(l,null),p(e,c),p(e,u),w(t,d,o),w(t,f,o),b(f,n.value),n.textarea_1_binding(f)},p(t,n){g!==(g=m(0,n))&&(_.d(1),(_=g(n))&&(_.c(),F(_,1),_.m(l,null))),t.value&&b(f,n.value)},i(t){F(_)},o:t,d(t){t&&v(e),_.d(),t&&(v(d),v(f)),n.textarea_1_binding(null),o(h)}}}function st(t,n,e){const r=A();let o,{markdown:a}=n,i=a;function s(t){const{selectionEnd:n}=o;e("value",i=`${i.slice(0,n)}${t}${i.slice(n)}`)}let l=!1;return t.$set=t=>{"markdown"in t&&e("markdown",a=t.markdown)},{markdown:a,value:i,textarea:o,handleCode:function(){s("\n```\n\n```\n")},handleLink:function(){s("[link](url)")},isSaved:l,handleSave:function(){var t;e("isSaved",l=!0),t=i,localStorage.setItem("markdown--string",DOMPurify.sanitize(t))},handleInput:function(t){l&&e("isSaved",l=!1)},handlePreview:function(){r("preview",i)},textarea_1_input_handler:function(){i=this.value,e("value",i)},textarea_1_binding:function(t){T[t?"unshift":"push"](()=>{e("textarea",o=t)})}}}class lt extends Z{constructor(t){super(),Y(this,t,st,it,i,["markdown"])}}function ct(n){var e,r,o,a,i;return{c(){e=k("nav"),(r=k("button")).innerHTML='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g transform="translate(5 5)" stroke-width="10" stroke="currentColor" stroke-linejoin="round" stroke-linecap="round" fill="none"><path d="M 73 0 l 17 17 -45 45 -17 0 0 -17 45 -45"></path><path d="M 35 10 h -25 a 10 10 0 0 0 -10 10 v 60 a 10 10 0 0 0 10 10 h 60 a 10 10 0 0 0 10 -10 v -25"></path></g></svg>',o=$(),x(r,"title","Edit markdown"),x(r,"aria-label","Edit markdown"),a=new M(n.markup,null),i=y(r,"click",n.click_handler)},m(t,n){w(t,e,n),p(e,r),w(t,o,n),a.m(t,n)},p(t,n){t.markup&&a.p(n.markup)},i:t,o:t,d(t){t&&(v(e),v(o),a.d()),i()}}}function ut(t,n,e){const r=A();let{markup:o}=n;return t.$set=t=>{"markup"in t&&e("markup",o=t.markup)},{dispatch:r,markup:o,click_handler:()=>r("edit")}}class dt extends Z{constructor(t){super(),Y(this,t,ut,ct,i,["markup"])}}function ft(t){var n,e=new lt({props:{markdown:t.markdown}});return e.$on("preview",t.handlePreview),{c(){e.$$.fragment.c()},m(t,r){Q(e,t,r),n=!0},p(t,n){var r={};t.markdown&&(r.markdown=n.markdown),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function ht(t){var n,e=new dt({props:{markup:marked(t.markdown)}});return e.$on("edit",t.handleEdit),{c(){e.$$.fragment.c()},m(t,r){Q(e,t,r),n=!0},p(t,n){var r={};t.markdown&&(r.markup=marked(n.markdown)),e.$set(r)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function mt(t){var n,e,r,a,i=[ht,ft],s=[];function l(t,n){return n.showPreview?0:1}return e=l(0,t),r=s[e]=i[e](t),{c(){n=k("div"),r.c(),x(n,"class","markdown-editor")},m(t,r){w(t,n,r),s[e].m(n,null),a=!0},p(t,a){var c=e;(e=l(0,a))===c?s[e].p(t,a):(V={r:0,c:[],p:V},G(s[c],1,1,()=>{s[c]=null}),V.r||o(V.c),V=V.p,(r=s[e])||(r=s[e]=i[e](a)).c(),F(r,1),r.m(n,null))},i(t){a||(F(r),a=!0)},o(t){G(r),a=!1},d(t){t&&v(n),s[e].d()}}}function pt(t,n,e){let r=nt(),o=!1;return{markdown:r,showPreview:o,handleEdit:function(){e("showPreview",o=!1)},handlePreview:function(t){e("markdown",r=DOMPurify.sanitize(t.detail)),e("showPreview",o=!0)}}}return new class extends Z{constructor(t){super(),Y(this,t,pt,mt,i,[])}}({target:document.body})}();